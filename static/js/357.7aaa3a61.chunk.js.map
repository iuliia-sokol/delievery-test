{"version":3,"file":"static/js/357.7aaa3a61.chunk.js","mappings":"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","sources":["pages/CartPage/CartPage.styled.js","pages/CartPage/CartPage.jsx","utils/coupons.js"],"sourcesContent":["import styled from \"styled-components\";\n\nexport const FormWrapper = styled.div`\nflex-basis: 40%;\nmin-width:250px;\nheight:fit-content;\npadding: 16px;\nbackground: rgba(255, 255, 255, 0.1);\nborder-radius: 16px;\nbackdrop-filter: blur(5px);\n-webkit-backdrop-filter: blur(5px);\nborder: 1px solid rgba(255, 255, 255, 0.3);\nborder-radius: ${p => p.theme.radii.tabs};\nborder: 2px solid rgba(110, 140, 500, 0.2);\n  box-shadow: 10px 12px 12px 0px #cab1b14d, 0 0 10em 1em rgba(110, 140, 500, 0.2);\n`\n\nexport const Form = styled.form`\ndisplay:flex;\nflex-direction:column;\ngap:16px;\nborder-radius: ${p => p.theme.radii.tabs};\n    padding: 16px 32px;\n    box-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;\n`\n\nexport const InputsWrapper = styled.div`\ndisplay:flex;\nflex-direction:column;\ngap:16px;\n\nlabel {\n    display:flex;\n    justify-content:space-between;\n    font-size:14px;\n    color: ${p => p.theme.colors.mainDark};  \n}\n\ninput {\n    width:200px;\n    border-radius: 8px;\n    padding:6px 12px;\n}\n\nbutton {\n    align-self:center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 2px solid transparent;\n  background-color:${p => p.theme.colors.mainAccent};\n  border-radius: ${p => p.theme.radii.btnStandart};\n  padding:8px 12px;\n  font-family: ${p => p.theme.fonts.main};\n  font-size: 14px;\n  font-weight: ${p => p.theme.fontWeights[2]};\n  text-transform: uppercase;\n  color: ${p => p.theme.colors.mainDark};\n  transition: ${p => p.theme.transitions.main};\n  cursor: pointer;\n\n  &:disabled {\n    opacity: 0.7;\n  }\n\n  &:hover:not(:disabled),\n  &:focus:not(:disabled) {\n    background-color: transparent;\n    border: 2px solid pink;\n  }\n}\n`\n\nexport const CartDataWrapper = styled.div`\nflex-grow:1;\ndisplay:flex;\nflex-direction:column;\ngap:8px;\nheight:fit-content;\nmax-height:70vh;\noverflow-y:scroll;\npadding: 16px;\nbackground: rgba(255, 255, 255, 0.1);\ncolor: ${p => p.theme.colors.mainDark};\nborder-radius: 16px;\nbackdrop-filter: blur(5px);\n-webkit-backdrop-filter: blur(5px);\nborder: 1px solid rgba(255, 255, 255, 0.3);\nborder-radius: ${p => p.theme.radii.tabs};\nborder: 2px solid rgba(110, 140, 500, 0.2);\n  box-shadow: 10px 12px 12px 0px #cab1b14d, 0 0 10em 1em rgba(110, 140, 500, 0.2);\n`\n\nexport const CartImg = styled.img`\nwidth:60px;\nborder-radius: ${p => p.theme.radii.tabs};\n`\n\nexport const ProductWrapper=styled.div`\ndisplay:flex;\njustify-content:space-between;\npadding: 8px 16px;\nborder-radius: ${p => p.theme.radii.tabs};\nbackground-color: rgba(255, 255, 255, 0.1);\nbox-shadow: inset 2px 2px 5px #babecc, inset -5px -5px 10px #fff;\n`\n\nexport const ProductInfoWrapper = styled.div`\nflex-basis:50%;\ndisplay:flex;\nalign-items:center;\ngap:12px;\n`\n\nexport const ProductQuantityWrapper = styled.div`\ndisplay:flex;\nalign-items:center;\ngap:12px;\n\np {\n    font-size:16px;\n    color: ${p => p.theme.colors.mainDark};\n}\n`\n\n\nexport const ProductPriceWrapper = styled.div`\ndisplay:flex;\nalign-items:center;\ngap:12px;\n\np {\n    font-size:16px;\n    color: ${p => p.theme.colors.mainDark};\n}\n`\n\nexport const TotalWrapper = styled.div`\nwidth:100%;\nmargin:16px 0px;\ndisplay:flex;\nalign-items:center;\nalign-self:flex-end;\njustify-content:space-between;\n`\nexport const CaptchaWrapper = styled.div`\nalign-self:center;\ndisplay:flex;\njustify-content:center;\n`\n\nexport const MapsInfo = styled.p`\nz-index:100;\nfont-size:10px;\n`\n\nexport const CouponWrapper = styled.div`\ndisplay:flex;\njustify-content:space-between;\n\ninput {\n  width:200px;\n    border-radius: 8px;\n    padding:6px 12px;\n}\n\n`\nexport const CouponBtn = styled.button`\n    align-self:center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 2px solid transparent;\n  background-color:${p => p.theme.colors.mainAccent};\n  border-radius: ${p => p.theme.radii.btnStandart};\n  padding:8px 12px;\n  font-family: ${p => p.theme.fonts.main};\n  font-size: 14px;\n  font-weight: ${p => p.theme.fontWeights[2]};\n  text-transform: uppercase;\n  color: ${p => p.theme.colors.mainDark};\n  transition: ${p => p.theme.transitions.main};\n  opacity: ${p=>p.unactive === 'true'? 0.3 : 1 };\n  pointer-events: ${p=>p.unactive === 'true'? 'none' : 'unset' };\n  /* cursor: pointer; */\n\n  &:disabled {\n    opacity: 0.7;\n  }\n\n  &:hover:not(:disabled),\n  &:focus:not(:disabled) {\n    background-color: transparent;\n    border: 2px solid pink;\n  }\n\n`","import { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { Formik } from 'formik';\nimport ReCAPTCHA from 'react-google-recaptcha';\nimport { GoogleMap, InfoWindowF, MarkerF, useLoadScript } from \"@react-google-maps/api\";\nimport { useGeolocated } from 'react-geolocated';\n\nimport { Container } from \"components/Container/Container\";\nimport { MainWrapper } from \"pages/HomePage/HomePage.styled\";\nimport { CaptchaWrapper, CartDataWrapper, CartImg, CouponBtn, CouponWrapper, Form, FormWrapper, InputsWrapper, MapsInfo, ProductInfoWrapper, ProductPriceWrapper, ProductQuantityWrapper, ProductWrapper, TotalWrapper } from \"./CartPage.styled\";\nimport { getCart } from \"redux/cart/cartSelectors\";\nimport defaultShopLogo from '../../images/defaultShopLogo.png'\nimport { BASE_URL, CAPTCHA_KEY, MAPS_KEY } from 'utils/consts';\nimport { Button } from \"components/Button/Button\";\nimport { cleanCart, decrementQuantity, incrementQuantity, removeItem } from \"redux/cart/cartSlice\";\nimport { setHistory } from \"redux/history/historyOperations\";\nimport { Loader } from \"components/Loader/Loader\";\nimport { getShopsList } from \"redux/shops/shopsSelectors\";\nimport { coupons } from \"utils/coupons\";\n\n\nconst CartPage = (shopLang, shopLat) => {\n  const dispatch = useDispatch();\n  const cart = useSelector(getCart)\n  const [total, setTotal] = useState(0)\n  const [checked, setChecked] = useState(false)\n  const [longitude, setLongitude] = useState('');\n  const [latitude, setLatitude] = useState('');\n  const [infoWindowOpen, setInfoWindowOpen] = useState(false);\n  const [activeMarker, setActiveMarker] = useState(null)\n  const [locationMarker, setLocationMarker]=useState({})\n  const [coupon, setCoupon] = useState('')\n  const [message, setMessage] = useState('')\n  \n  const shops = useSelector(getShopsList)\n  const shop = shops.find(shop=> shop._id===cart[0].shopId)\n  const shopCoords = {\"lat\": +shop.lat, \"lng\": +shop.long}\n\n  const { isLoaded } = useLoadScript({\n    googleMapsApiKey:`${MAPS_KEY}`,\n  });\n\n\n  const { coords, isGeolocationAvailable, isGeolocationEnabled } =\n  useGeolocated({\n    positionOptions: {\n      enableHighAccuracy: false,\n    },\n    userDecisionTimeout: undefined,\n    suppressLocationOnMount: false,\n  });\n\n\n  useEffect(() => {\n    if (coords) {\n     setLatitude(coords.latitude);\n     setLongitude(coords.longitude);\n     setLocationMarker({ lat: +coords.latitude, lng: +coords.longitude })\n    }\n    if (!isGeolocationAvailable || !isGeolocationEnabled ) {\n     setLatitude('')\n     setLongitude('')\n    }\n    return;\n  }, [coords, isGeolocationAvailable, isGeolocationEnabled]);\n\n  useEffect(()=>{\n    if(cart.length>0){\n      setTotal(cart.reduce((total, item)=>total+(item.price*item.quantity),0))\n      }\n      if(cart.length<=0){\n        setTotal(0)\n      }\n  },[cart])\n\n  const handleSubmit = ({values, order, total}) => {\n    const data = {name:values.name, email:values.email, phone:values.phone, address:values.address, order, total}\n    dispatch(cleanCart())\n    dispatch(setHistory(data));\n    setTotal(0)\n  };\n\n  const onCaptchaClick = ()=> {\n    setChecked(!checked)\n  }\n\n  const onMarkerClick=(elem)=>{\n    setActiveMarker(elem)\n    setInfoWindowOpen(true);\n  }\n\n  const onMarkerDragEnd = (coord) => {\n    const { latLng } = coord;\n    const lat = latLng.lat();\n    const lng = latLng.lng();\n    setLocationMarker({lat,lng})\n  };\n\nconst onCouponSubmit =()=>{\nconst submittedCoupon = coupons.find(el=>el.code === coupon)\nif(!submittedCoupon) {\n  setMessage(\"Coupon is unvalid\")\n  setCoupon('')\n}\nelse {\n  setMessage(`You used ${submittedCoupon.name} coupon`)\n  setCoupon('')\n}\n}\n\n\nconst onCouponInputChange = (e)=>{\n  setCoupon(e.target.value)\n}\n\nconsole.log(coupon);\n\n    return (\n      <Container >\n          {!isLoaded ? (\n        <Loader/>\n      ) :\n      <MainWrapper>\n        <FormWrapper>\n        <div style={{  \"width\":\"100%\",\"height\": \"250px\"}}>\n        {latitude && longitude && \n        <GoogleMap\n          mapContainerClassName=\"map-container\"\n          center={locationMarker}\n          zoom={10}\n        >\n         <MarkerF\n         clickable\n         name={shop.name}\n          onClick={() => {\n            onMarkerClick('shop');\n          }}\n          icon={\"http://maps.google.com/mapfiles/ms/icons/red-dot.png\"}\n          position={shopCoords}\n        >\n          {infoWindowOpen && activeMarker==='shop' && (\n            <InfoWindowF  onCloseClick={() => {\n              setInfoWindowOpen(false)\n              setActiveMarker(null)\n              }}>\n              <MapsInfo>{shop.name}</MapsInfo>\n            </InfoWindowF>\n          )}\n\n        </MarkerF>\n       {locationMarker &&\n        <MarkerF\n          clickable\n          draggable={true}\n          onDragend={(t, map, coord) => onMarkerDragEnd(coord)}\n          name='Your location'\n          onClick={() => {\n            onMarkerClick('loc');\n          }}\n          position={locationMarker}\n          icon={\"http://maps.google.com/mapfiles/ms/icons/green-dot.png\"}\n        >\n          {infoWindowOpen && activeMarker==='loc' && (\n            <InfoWindowF   onCloseClick={() => {\n              setInfoWindowOpen(false)\n              setActiveMarker(null)\n              }}>\n              <MapsInfo>Your location</MapsInfo>\n            </InfoWindowF>\n          )}\n        </MarkerF>}\n    \n        </GoogleMap>}\n        </div>\n        <Formik\n      initialValues={{\n        name: '',\n        email: '',\n        phone: '',\n        address: '',\n      }}\n      onSubmit={(values, actions) => {\n        handleSubmit({values, order:JSON.stringify(cart), total:total.toString()});\n        actions.setSubmitting(false);\n        actions.resetForm();\n      }}\n    >\n      {props => (\n        <Form onSubmit={props.handleSubmit}>\n          <InputsWrapper>\n            <label htmlFor=\"name\" id=\"labelName\"> Name\n              <input\n                type=\"text\"\n                placeholder=\"Enter your name\"\n                name=\"name\"\n                value={props.values.name}\n                id=\"name\"\n                onBlur={() => {\n                  props.setTouched({\n                    name: true,\n                  });\n                }}\n                onChange={event => {\n                  props.setTouched({\n                    name: true,\n                  });\n                  props.setFieldValue('name', event.target.value);\n                }}\n              />\n            </label>\n            <label htmlFor=\"email\" id=\"labelEmail\"> Email\n              <input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Enter your email\"\n                value={props.values.email}\n                id=\"email\"\n                onBlur={() => {\n                  props.setTouched({\n                    email: true,\n                  });\n                }}\n                onChange={event => {\n                  props.setTouched({\n                    email: true,\n                  });\n                  props.setFieldValue('email', event.target.value);\n                }}\n              />\n            </label>\n            <label htmlFor=\"phone\" id=\"labelPhone\"> Phone\n              <input\n                type=\"tel\"\n                name=\"phone\"\n                placeholder=\"Enter your phone number\"\n                value={props.values.phone}\n                id=\"phone\"\n                onBlur={() => {\n                  props.setTouched({\n                    phone: true,\n                  });\n                }}\n                onChange={event => {\n                  props.setTouched({\n                    phone: true,\n                  });\n                  props.setFieldValue('phone', event.target.value);\n                }}\n              />\n            </label>\n            <label htmlFor=\"address\" id=\"labelAddress\"> Address\n              <input\n                type=\"text\"\n                name=\"address\"\n                placeholder=\"Enter your address\"\n                value={props.values.address}\n                id=\"address\"\n                onBlur={() => {\n                  props.setTouched({\n                    address: true,\n                  });\n                }}\n                onChange={event => {\n                  props.setTouched({\n                    address: true,\n                  });\n                  props.setFieldValue('address', event.target.value);\n                }}\n              />\n            </label>\n            <CaptchaWrapper>\n            <ReCAPTCHA\n              sitekey={CAPTCHA_KEY}\n              onChange={onCaptchaClick}\n            />\n          </CaptchaWrapper>\n            <button\n              type=\"submit\"\n              disabled={\n                !checked || !props.values.name || !props.values.email || !props.values.phone || !props.values.address\n              }\n            >\n             Submit\n            </button>\n          </InputsWrapper>\n        </Form>\n      )}\n    </Formik>\n        </FormWrapper>\n        <CartDataWrapper> \n         {cart.length<=0 ? <p>Cart is empty</p>:\n          <ul>\n          {cart.map(item => {\n                  return (\n                    <li key={item.name} >\n                      <ProductWrapper>\n                        <ProductInfoWrapper> \n                          <CartImg src={item.pictureURL ? `${BASE_URL}/${item.pictureURL}`: defaultShopLogo} alt=\"shop logo\"/>\n                          <h5>{item.name}</h5>\n                      </ProductInfoWrapper>\n                      <ProductQuantityWrapper>\n                      <Button text='-' location='cart' onClick={() => \n                       dispatch(decrementQuantity(item.name))} />\n                      <p>{item.quantity}</p>\n                      <Button text='+' location='cart' onClick={() => \n                       dispatch(incrementQuantity(item.name))} />\n                      </ProductQuantityWrapper>\n\n                      <ProductPriceWrapper>\n                      {item.price * item.quantity}\n                      </ProductPriceWrapper>\n                \n                      <Button text='Remove' location='cart' onClick={() => \n                       dispatch(removeItem(item.name))} />\n                      </ProductWrapper>\n                \n                    </li>\n                  );\n                })}\n          </ul>}\n                <TotalWrapper>\n                  <p>Total:</p>\n                  <p>{total} UAH</p>\n                  </TotalWrapper>\n                  <CouponWrapper>\n                  <input type='text' value={coupon} placeholder=\"Add coupon code\" onChange={(e)=>onCouponInputChange(e)}/> \n                  <CouponBtn unactive={(!coupon).toString()}\n                  onClick={onCouponSubmit}\n                  >\n                    Use coupon</CouponBtn>\n                  </CouponWrapper>\n                  {message? <p>{message}</p>: <p></p>}\n\n                  \n        </CartDataWrapper>\n      </MainWrapper>\n      }\n      </Container>\n    );\n  };\n  \n  export default CartPage;","export \nconst coupons = [\n  {imgURL : 'https://cdn.pixabay.com/photo/2017/01/05/18/42/sale-1956066_1280.png', name: 'Get 10% discount', code:'SALE'},\n  {imgURL : 'https://cdn.pixabay.com/photo/2020/05/25/08/40/food-delivery-5217579_1280.png', name: 'Get free delivery', code:'DELIVERY'},\n]\n"],"names":["FormWrapper","styled","p","theme","radii","tabs","Form","InputsWrapper","colors","mainDark","mainAccent","btnStandart","fonts","main","fontWeights","transitions","CartDataWrapper","CartImg","ProductWrapper","ProductInfoWrapper","ProductQuantityWrapper","ProductPriceWrapper","TotalWrapper","CaptchaWrapper","MapsInfo","CouponWrapper","CouponBtn","unactive","shopLang","shopLat","dispatch","useDispatch","cart","useSelector","getCart","useState","total","setTotal","checked","setChecked","longitude","setLongitude","latitude","setLatitude","infoWindowOpen","setInfoWindowOpen","activeMarker","setActiveMarker","locationMarker","setLocationMarker","coupon","setCoupon","message","setMessage","shop","getShopsList","find","_id","shopId","shopCoords","lat","long","isLoaded","useLoadScript","googleMapsApiKey","MAPS_KEY","useGeolocated","positionOptions","enableHighAccuracy","userDecisionTimeout","undefined","suppressLocationOnMount","coords","isGeolocationAvailable","isGeolocationEnabled","useEffect","lng","length","reduce","item","price","quantity","onCaptchaClick","onMarkerClick","elem","console","log","Container","style","mapContainerClassName","center","zoom","clickable","name","onClick","icon","position","onCloseClick","draggable","onDragend","t","map","coord","latLng","onMarkerDragEnd","initialValues","email","phone","address","onSubmit","values","actions","order","data","cleanCart","setHistory","handleSubmit","JSON","stringify","toString","setSubmitting","resetForm","props","htmlFor","id","type","placeholder","value","onBlur","setTouched","onChange","event","setFieldValue","target","sitekey","CAPTCHA_KEY","disabled","src","pictureURL","BASE_URL","defaultShopLogo","alt","Button","text","location","decrementQuantity","incrementQuantity","removeItem","e","onCouponInputChange","submittedCoupon","coupons","el","code","Loader","imgURL"],"sourceRoot":""}